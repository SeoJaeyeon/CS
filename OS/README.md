## OS(Operating System)

### 프로세스와 스레드의 차이

**프로세스**

- 실행중인 프로그램 

- 메모리에 적재되어 CPU의 할당을 기다리는 프로그램 

- 프로세스 스택 (지역변수, 매개변수, 복귀주소)+ 데이터 섹션(전역변수) + 힙(동적할당)

**PCB**

- 프로세스에 대한 정보 저장
- OS는 프로세스 생성과 동시에 고유한 PCB 생성 
- CPU 할당시 작업 내역을 PCB에 저장하고, 다시 할당받게되면 PCB에 저장된 내용을 불러와 종료됐던 시점부터 다시 수행 
- PID, 프로세스 상태(new, ready, running, wating, terminated), 프로그램 카운터, CPU 레지스터, CPU 스케줄링 정보, 메모리 관리 정보, 입출력 상태 정보, 어카운팅 정보 

![프로세스상태](https://zetawiki.com/w/images/thumb/d/d5/Process-state.jpg/600px-Process-state.jpg)

**스레드**

- 프로세스의 실행 단위 
- 프로세스 내의 주소 공간이나 자원 공유(코드, 데이터섹션, 열린 파일이나 신호) 
- 스레드 ID, 프로그램 카운터, 레지스터 집합, 스택 
- 멀티스레딩: 하나의 프로세스를 다수의 실행 단위로 구분하여 자원을 공유하고 자원의 생성과 관리의 중복성을 최소화하여 수행능력을 향상시키는 것. 각각의 스레드는 독립적인 작업을 수행해야 하기 때문에 각자의 스택(독립적인 함수 호출)과 PC 레지스터 값을 가짐 



### 멀티스레드

**멀티스레딩의 장점**

- 메모리 공간과 시스템 자원소모가 줄어들음
- 스레드 간 통신이 전역 변수 공간이나 Heap을 이용하기 때문에 프로세스 간 통신 방법에 비해 간단함
- 스레드의 context switching은 프로세스와 달리 캐시 메모리를 비울 필요가 없어서 더 빠름 
- throughput이 향상되고 자원 소모가 줄어들며 응답 시간이 단축 됨 

**멀티 스레딩의 문제점**

- 공유 자원에 동시에 접근하는 것을 신경써야 함 (데이터 영역, 힙 영역)
- 동기화 작업이 필요함
- 동기화 작업으로 인해 병목 현상이 발생하지 않도록 주의해야 함



**멀티 스레드 vs 멀티 프로세스**

- 멀티  스레드는 멀티 프로세스보다 적은 메모리 공간을 차지하고 context switching이 빠르지만, 하나의 스레드가 종료되면 전체 스레드가 종료될 수 있으며 병목 현상 없는 동기화를 신경써주어야 한다. 멀티 프로세스는 하나의 프로세스가 종료되어도 다른 프로세스가 영향을 받지 않지만, 스레드보다 많은 메모리 공간과 CPU 시간을 차지한다. 